<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png?v=5.1.3">


  <link rel="mask-icon" href="/favicon.png?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT, Javascript, React, Blog" />










<meta name="description" content="写写心得，发发牢骚，爬爬天坑，孤单的编程之路上留点念。">
<meta property="og:type" content="website">
<meta property="og:title" content="kabulu | 杂食堆">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="kabulu | 杂食堆">
<meta property="og:description" content="写写心得，发发牢骚，爬爬天坑，孤单的编程之路上留点念。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kabulu | 杂食堆">
<meta name="twitter:description" content="写写心得，发发牢骚，爬爬天坑，孤单的编程之路上留点念。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>kabulu | 杂食堆</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?99c49655f3b5916bce560327ccaddf21";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">kabulu | 杂食堆</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">面对现实，忠于理想</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/30/nextjs-17-11-30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/30/nextjs-17-11-30/" itemprop="url">React next 采坑攻略</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-30T15:21:36+08:00">
                2017年 11月 30日
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近终于完成了next架构的搭建，高度自定义，集成了dva、scss、antd。终于可以开始编写组件了。</p>
<p>主要是为了前后台同时用React写，组件复用。前台需要SEO的可以服务器渲染生成，后台搞成纯SPA应用</p>
<p>由于我个人极其不爽在jsx里写一大堆css，逻辑混乱，不支持各种高级特性。所以参考官网实例搞了好久。</p>
<p>同时支持css-in-js和scss内部注入组件。dva状态管理。</p>
<p>英语不好真的是硬伤啊，效率太低…</p>
<h2 id="1-scss-全局配置："><a href="#1-scss-全局配置：" class="headerlink" title="1. scss 全局配置："></a>1. scss 全局配置：</h2><h4 id="next-config-js"><a href="#next-config-js" class="headerlink" title="next.config.js"></a>next.config.js</h4><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</div><div class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">"glob"</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    webpack: <span class="function">(<span class="params">config, &#123; dev &#125;</span>) =&gt;</span> &#123;</div><div class="line">        config.module.rules.push(</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.(css|scss)/</span>,</div><div class="line">                loader: <span class="string">"emit-file-loader"</span>,</div><div class="line">                options: &#123;</div><div class="line">                    name: <span class="string">"dist/[path][name].[ext]"</span></div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.css$/</span>,</div><div class="line">                use: [<span class="string">"babel-loader"</span>, <span class="string">"raw-loader"</span>, <span class="string">"postcss-loader"</span>]</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test: <span class="regexp">/\.s(a|c)ss$/</span>,</div><div class="line">                use: [</div><div class="line">                    <span class="string">"babel-loader"</span>,</div><div class="line">                    <span class="string">"raw-loader"</span>,</div><div class="line">                    <span class="string">"postcss-loader"</span>,</div><div class="line">                    &#123;</div><div class="line">                        loader: <span class="string">"sass-loader"</span>,</div><div class="line">                        options: &#123;</div><div class="line">                            includePaths: [<span class="string">"styles"</span>, <span class="string">"node_modules"</span>]</div><div class="line">                                .map(<span class="function"><span class="params">d</span> =&gt;</span> path.join(__dirname, d))</div><div class="line">                                .map(<span class="function"><span class="params">g</span> =&gt;</span> glob.sync(g))</div><div class="line">                                .reduce(<span class="function">(<span class="params">a, c</span>) =&gt;</span> a.concat(c), [])</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                ]</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">        <span class="keyword">return</span> config;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="pages-index-js-内部组件注入"><a href="#pages-index-js-内部组件注入" class="headerlink" title="pages/index.js 内部组件注入"></a>pages/index.js 内部组件注入</h4><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> Stylesheet <span class="keyword">from</span> <span class="string">"styles/index.scss"</span>;</div><div class="line">...</div><div class="line">&lt;style dangerouslySetInnerHTML=&#123;&#123; <span class="attr">__html</span>: Stylesheet &#125;&#125; /&gt;</div></pre></td></tr></table></figure>
<h2 id="2-webpack编译警告，消除"><a href="#2-webpack编译警告，消除" class="headerlink" title="2. webpack编译警告，消除"></a>2. webpack编译警告，消除</h2><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">There are multiple modules with names that only differ <span class="keyword">in</span> casing.</div><div class="line">This can lead to unexpected behavior when compiling on a filesystem with other <span class="keyword">case</span>-semantic.</div><div class="line">Use equal casing. Compare these module identifiers:</div><div class="line">...</div></pre></td></tr></table></figure>
<p><strong>翻译</strong></p>
<p>有多个模块名称仅仅大小写不同<br>这会导致在文件系统中产生一些不是预期的行为<br>使用唯一的写法</p>
<p>就是有一些模块名称相似，需要修改成不一样的。</p>
<h2 id="3-杂食堆"><a href="#3-杂食堆" class="headerlink" title="3. 杂食堆"></a>3. 杂食堆</h2><h5 id="git-打分支"><a href="#git-打分支" class="headerlink" title="git 打分支"></a>git 打分支</h5><p>git branch -b “zhaihaoran”<br>会创建一个zhaihaoran的分支</p>
<p>git branch 可以查看所有分支信息</p>
<p>提交的时候，git push origin zhaihaoran<br>就可以在分支上进行提交</p>
<h5 id="去除react-router的-k-参数"><a href="#去除react-router的-k-参数" class="headerlink" title="去除react-router的_k 参数"></a>去除react-router的_k 参数</h5><p>因为默认router是由hashHistory实现，由锚点实现，因为锚点不会导致页面跳转。因为 url 中 # 符号的存在，从 /#/ 到 /#/user/haishanh 浏览器并不会去发送一次 request<br>目的主要是为了兼容低版本浏览器。</p>
<p>去除的话可以改为现代浏览器的browserHistory，但是需要服务器端配合。</p>
<h5 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h5><ul>
<li>ssr (Server Side Render) 服务器渲染</li>
<li>csr (Client Side Render) 客户端渲染</li>
<li>GPU、CPU、APU (声音处理器)<br>  通过PCI/AGP/PCIE总线交换数据。GPU在浮点运算、并行计算等部分计算方面，明显高于CPU的性能</li>
</ul>
<h5 id="English"><a href="#English" class="headerlink" title="English"></a>English</h5><ul>
<li>boilerplate 样板</li>
<li>insights 洞察</li>
<li>mutated 突变</li>
<li>can`t be reasigned 重新分配</li>
<li>traversal 遍历</li>
</ul>
<h5 id="JS动画比css快！"><a href="#JS动画比css快！" class="headerlink" title="JS动画比css快！"></a>JS动画比css快！</h5><p><a href="http://www.oschina.net/translate/css-js-animation" target="_blank" rel="external">http://www.oschina.net/translate/css-js-animation</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/28/react-next/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/28/react-next/" itemprop="url">react-next</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-28T16:37:28+08:00">
                2017年 11月 28日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="react-next-js-学习"><a href="#react-next-js-学习" class="headerlink" title="react next.js 学习"></a>react next.js 学习</h1><h3 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h3><p>目前渲染分为三种机制</p>
<ul>
<li><strong>后端渲染</strong>：php、ASP、Java等等，由服务器处理bolierplate然后一次吐给浏览器进行渲染</li>
<li><strong>前端渲染</strong>：SPA应用，三大框架。由JS控制浏览器渲染机制，后端只负责model和model处理的逻辑</li>
<li><strong>同构渲染</strong>：简单来说，就是两者的混合体，前后端共用js,首次渲染使用nodejs直出HTML，其他渲染均有JS控制完成</li>
</ul>
<h4 id="前端渲染相比后端优劣势"><a href="#前端渲染相比后端优劣势" class="headerlink" title="前端渲染相比后端优劣势"></a>前端渲染相比后端优劣势</h4><h5 id="优势："><a href="#优势：" class="headerlink" title="优势："></a>优势：</h5><ul>
<li>局域刷新，无需每次都进行完整页面请求</li>
<li>富交互性，懒加载</li>
<li>节约服务器成本。省电省钱，JS 支持 CDN 部署，且部署极其简单</li>
<li>JS 一次学习，到处使用。可以用来开发 Web、Serve、Mobile、Desktop 类型的应用</li>
</ul>
<h5 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h5><ul>
<li>首屏加载时间过长；如果不进行优化，首次加载需要加载一大堆css和js文件，会有较长白屏。体验较差</li>
<li>不利于搜索引擎爬取内容（SEO）</li>
</ul>
<h4 id="同构渲染可以说汲取了两者的优势。是未来前端的方向"><a href="#同构渲染可以说汲取了两者的优势。是未来前端的方向" class="headerlink" title="同构渲染可以说汲取了两者的优势。是未来前端的方向"></a>同构渲染可以说汲取了两者的优势。是未来前端的方向</h4><h3 id="什么是nextjs"><a href="#什么是nextjs" class="headerlink" title="什么是nextjs"></a>什么是nextjs</h3><p>nextjs 是一个server端渲染react组件的开源库 想要了解它的原因是</p>
<ul>
<li>寻找React的SEO的解决方案中，无意发现的</li>
<li>star很多，维护很积极</li>
<li>服务器端渲染道听途说多，有必要实际了解下</li>
<li>多学总没有坏处</li>
</ul>
<h3 id="资料收集"><a href="#资料收集" class="headerlink" title="资料收集"></a>资料收集</h3><p><a href="http://sjy.github.io/2017/07/09/learn-next-js/" target="_blank" rel="external">http://sjy.github.io/2017/07/09/learn-next-js/</a><br><a href="https://github.com/camsong/blog/issues/8" target="_blank" rel="external">https://github.com/camsong/blog/issues/8</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/17/面试经验/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/17/面试经验/" itemprop="url">面试收获 --- 查遗补漏</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-17T22:11:19+08:00">
                2017年 11月 17日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>总结一下，比第一次去腾讯面试感觉强了很多，说话相对流利了一些，心里也不太紧张了，不过语速还是偏快，知识体系相对过往完善了很多，补充了很多理论知识，不至于只能让面试官强行尬聊10分钟就结束,哈哈哈….</li>
<li>这次的问题还是基础不太扎实牢靠，竟然在一些弱智问题上答错了，可恶….,同时缓存这块还是需要恶补一下，这次一定要彻底弄清楚，不能一知半解。</li>
<li>不过能聊1个h，而且面试官对自己水平给予了肯定的评价，还是蛮开心的，同时也得到了沪江复试的机会。</li>
<li>不管结果怎么样，希望下次能发挥出全部的实力，而不是后悔当时没有好好准备。</li>
</ul>
<h3 id="1-最最基本的问题-—-变量提升！"><a href="#1-最最基本的问题-—-变量提升！" class="headerlink" title="1.最最基本的问题 — 变量提升！"></a>1.最最基本的问题 — 变量提升！</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line">test()</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(a) <span class="comment">// 1 错！</span></div><div class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</div><div class="line">    <span class="built_in">console</span>.log(a) <span class="comment">// 2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>没想到会在这种基础的问题上翻车,气死<br><strong>首先在test函数内部，<code>var a = 2</code>声明后，变量a的声明会提升到test函数内部的顶部！</strong></p>
<p><strong>所以第一个<code>console</code>是可以拿到test内部的a变量的！</strong>。而不是向上级作用域寻找a变量。</p>
<p>所以答案是<code>undefined</code></p>
<h3 id="2-cookie-如何在非同源中进行共享？"><a href="#2-cookie-如何在非同源中进行共享？" class="headerlink" title="2. cookie 如何在非同源中进行共享？"></a>2. cookie 如何在非同源中进行共享？</h3><p>具体应用场景：</p>
<p>比如在前台<code>www.iqidao.com</code>有链接可以跳转到管理后台<code>www.iqidao.com:10088</code>,或可以跳转到管理论坛<code>xxx.iqidao.com</code>等等情况。这三个页面如果分属三个子项目的话，必然需要进行通信。需要保证跳转的时候登陆状态共享，而且可能包含国际化、用户配置的会话信息。</p>
<p>但我们知道cookie只能在同源中共享。有没有方法可以解决这个问题呢？<br>如何在项目之前共享cookie呢</p>
<p>实际面试的时候，可能不会问上面这么细致。不过即使问这么细致，我也答不出….</p>
<p>最后不废话了，开始解答，从背景开始，start！</p>
<h5 id="1-cookie字段都包含哪些？"><a href="#1-cookie字段都包含哪些？" class="headerlink" title="1.cookie字段都包含哪些？"></a>1.cookie字段都包含哪些？</h5><p><img src="./面试经验/cookie.png" alt="cookie"></p>
<p>如上图所示：</p>
<p><code>name</code> cookie的名称<br><code>value</code> cookie的值<br><code>Domain</code> 可以访问此cookie的域名。比如<code>.baidu.com</code></p>
<p><strong>注意</strong>：非顶级域名，如二级域名或者三级域名，设置的cookie的domain只能为顶级域名或者二级域名或者三级域名本身，不能设置其他二级域名的cookie，否则cookie无法生成。</p>
<p>顶级域名只能设置domain为顶级域名，不能设置为二级域名或者三级域名，否则cookie无法生成。</p>
<p>二级域名能读取设置了domain为顶级域名或者自身的cookie，不能读取其他二级域名domain的cookie。所以要想cookie在多个二级域名中共享，需要设置domain为顶级域名，这样就可以在所有二级域名里面或者到这个cookie的值了。<br>顶级域名只能获取到domain设置为顶级域名的cookie，其他domain设置为二级域名的无法获取。</p>
<p><code>Path</code> 可以访问此cookie的页面路径,比如domain是<code>abc.com</code>,path是/test，那么只有/test路径下的页面可以读取此cookie。<br><code>Expires/Max-age</code> cookie的过期时间，如果不设置的话，默认值是session,意思就是cookie和session一起失效.<strong>当浏览器关闭(不是浏览器标签页，而是整个浏览器)</strong> 后，此cookie失效。<br><code>Size</code> cookie大小<br><code>HTTP</code> cookie的httponly属性。若此属性为true，则只有在http请求头中会带有此cookie的信息，而不能通过document.cookie来访问此cookie。<br><code>Secure</code>  设置是否只能通过https来传递此条cookie<br><code>SameSite</code></p>
<h5 id="2-cookie非同源是如何判断的呢？"><a href="#2-cookie非同源是如何判断的呢？" class="headerlink" title="2.cookie非同源是如何判断的呢？"></a>2.cookie非同源是如何判断的呢？</h5><p>cookie通过domain和path属性判断，path和domain只要有一个不同，那就表示跨域，无法实现共享，而不同项目之间domain可能相同，而path一定是不同的</p>
<h5 id="3-如何设置或进行跨源共享"><a href="#3-如何设置或进行跨源共享" class="headerlink" title="3.如何设置或进行跨源共享"></a>3.如何设置或进行跨源共享</h5><p>设置document.domain = “iqidao.com”,可以实现二级域名不同，一级域名相同的跨域共享。</p>
<p>比如<code>www.iqidao.com</code>和<code>aaa.iqidao.com</code>，实际上他们2个域名地址访问的是同一个cookie。</p>
<h3 id="3-LocalStorage和Ajax如何跨域通信"><a href="#3-LocalStorage和Ajax如何跨域通信" class="headerlink" title="3. LocalStorage和Ajax如何跨域通信"></a>3. LocalStorage和Ajax如何跨域通信</h3><p>window.postMessage</p>
<p>这个是html5新出的API,这个API为window对象新增了一个window.postMessage方法，允许跨窗口通信，不论这两个窗口是否同源。<br>举例来说，父窗口<a href="http://aaa.com向子窗口http://bbb.com发消息，调用postMessage方法就可以了" target="_blank" rel="external">http://aaa.com向子窗口http://bbb.com发消息，调用postMessage方法就可以了</a><br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> popup = <span class="built_in">window</span>.open(<span class="string">'http://bbb.com'</span>, <span class="string">'title'</span>);</div><div class="line">popup.postMessage(<span class="string">'Hello World!'</span>, <span class="string">'http://bbb.com'</span>);</div></pre></td></tr></table></figure></p>
<p>postMessage方法的第一个参数是具体的信息内容，第二个参数是接收消息的窗口的源（origin），即”协议 + 域名 + 端口”。也可以设为*，表示不限制域名，向所有窗口发送。</p>
<p>子窗口向父窗口发送消息的写法类似。<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">window</span>.opener.postMessage(<span class="string">'Nice to see you'</span>, <span class="string">'http://aaa.com'</span>);</div></pre></td></tr></table></figure></p>
<p>父窗口和子窗口都可以通过message事件，监听对方的消息。<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(e.data);</div><div class="line">&#125;,<span class="literal">false</span>);</div></pre></td></tr></table></figure></p>
<p>上述方法可以读取到localStorage</p>
<p>AJAX 有3种方法可以跨源通信</p>
<ul>
<li>JSONP     只能发get请求</li>
<li>WebSocket</li>
<li>CORS      允许任何类型</li>
</ul>
<p>CORS需要浏览器和服务器同时支持</p>
<p>整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。<br>因此，实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨源通信。</p>
<p>参考博文：<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2016/04/cors.html</a></p>
<h3 id="3-如何拿到登录页端的短信验证码？手机验证码中4位和6位有什么区别？"><a href="#3-如何拿到登录页端的短信验证码？手机验证码中4位和6位有什么区别？" class="headerlink" title="3. 如何拿到登录页端的短信验证码？手机验证码中4位和6位有什么区别？"></a>3. 如何拿到登录页端的短信验证码？手机验证码中4位和6位有什么区别？</h3><p>这个是完全不知道，感觉是涉及到了xss防御和脚本注入的一些黑科技吧。查了很多资料没补上</p>
<h5 id="手机验证码4位和6位的区别"><a href="#手机验证码4位和6位的区别" class="headerlink" title="手机验证码4位和6位的区别"></a>手机验证码4位和6位的区别</h5><ul>
<li>6位验证码比4位更安全</li>
<li>目前常用的第三方短信发送验证码平台都是4或6位，</li>
<li><strong>6位数字破解时间预计会超过验证码超时时间</strong></li>
</ul>
<h5 id="如何拿到短信验证码？"><a href="#如何拿到短信验证码？" class="headerlink" title="如何拿到短信验证码？"></a>如何拿到短信验证码？</h5><h3 id="4-代理模式具体解释一下"><a href="#4-代理模式具体解释一下" class="headerlink" title="4. 代理模式具体解释一下"></a>4. 代理模式具体解释一下</h3><p>为一个对象提供一个占用品或占位符，以控制他的访问</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/16/javascript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/16/javascript/" itemprop="url">javaScript 设计模式回顾</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-16T21:14:16+08:00">
                2017年 11月 16日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>好久之前看过<code>AlloyTeam</code>写的javascript设计模式与开发实践。当时似懂非懂，看的很仔细，但感觉没有对应的工作经验，无法深刻体会到具体的精髓，并不知其所以然。看了一段时间源码后，算是理解了一部分设计模式的精髓。此番回顾一下，重读一遍该书，以加深理解</p>
<h2 id="1-单例模式"><a href="#1-单例模式" class="headerlink" title="1. 单例模式"></a>1. 单例模式</h2><p>文件只有单一类，所以方法全部聚集在原型链，目前最最常用的，不多说</p>
<h3 id="代理实现单例模式，缓存代理"><a href="#代理实现单例模式，缓存代理" class="headerlink" title="代理实现单例模式，缓存代理"></a>代理实现单例模式，缓存代理</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> ProxySingletonCreateDiv = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> instance;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"> html </span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span> ( !instance )&#123;</div><div class="line">            instance = <span class="keyword">new</span> CreateDiv( html );</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<h2 id="2-策略模式"><a href="#2-策略模式" class="headerlink" title="2. 策略模式"></a>2. 策略模式</h2><p>将具有多态（策略）或者状态发生变化的情况下，将策略转化为对象属性(策略)进行统一管理，同时可以减少很多if，优雅。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> strategies = &#123;</div><div class="line">    <span class="string">"S"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">salary</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> salary * <span class="number">4</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="string">"A"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">salary</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> salary * <span class="number">3</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="string">"B"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">salary</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> salary * <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">.....</div><div class="line"><span class="keyword">var</span> calculateBonus = <span class="function"><span class="keyword">function</span>(<span class="params"> level, salary </span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> strategies[ level ]( salary );</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>应用场景，后台返回状态码、动画曲线库、表单验证规则库<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> tween = &#123;</div><div class="line">    linear: <span class="function"><span class="keyword">function</span>(<span class="params">t, b, c, d</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> c * t / d + b;</div><div class="line">    &#125;,</div><div class="line">    easeIn: <span class="function"><span class="keyword">function</span>(<span class="params">t, b, c, d</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> c * (t /= d) * t + b;</div><div class="line">    &#125;,</div><div class="line">    strongEaseIn: <span class="function"><span class="keyword">function</span>(<span class="params">t, b, c, d</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> c * (t /= d) * t * t * t * t + b;</div><div class="line">    &#125;,</div><div class="line">    strongEaseOut: <span class="function"><span class="keyword">function</span>(<span class="params">t, b, c, d</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> c * ((t = t / d - <span class="number">1</span>) * t * t * t * t + <span class="number">1</span>) + b;</div><div class="line">    &#125;,</div><div class="line">    sineaseIn: <span class="function"><span class="keyword">function</span>(<span class="params">t, b, c, d</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> c * (t /= d) * t * t + b;</div><div class="line">    &#125;,</div><div class="line">    sineaseOut: <span class="function"><span class="keyword">function</span>(<span class="params">t, b, c, d</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> c * ((t = t / d - <span class="number">1</span>) * t * t + <span class="number">1</span>) + b;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> strategies = &#123;</div><div class="line">    isNonEmpty: <span class="function"><span class="keyword">function</span>(<span class="params">value, errorMsg</span>) </span>&#123; <span class="comment">// 不为空</span></div><div class="line">        <span class="keyword">if</span> (value === <span class="string">''</span>) &#123;</div><div class="line">            <span class="keyword">return</span> errorMsg;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    minLength: <span class="function"><span class="keyword">function</span>(<span class="params">value, length, errorMsg</span>) </span>&#123; <span class="comment">// 限制最小长度</span></div><div class="line">        <span class="keyword">if</span> (value.length &lt; length) &#123;</div><div class="line">            <span class="keyword">return</span> errorMsg;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    isMobile: <span class="function"><span class="keyword">function</span>(<span class="params">value, errorMsg</span>) </span>&#123; <span class="comment">// 手机号码格式</span></div><div class="line">        <span class="keyword">if</span> (!<span class="regexp">/(^1[3|5|8][0-9]&#123;9&#125;$)/</span>.test(value)) &#123;</div><div class="line">            <span class="keyword">return</span> errorMsg;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">...</div><div class="line">validator.add( registerForm.userName, <span class="string">'isNonEmpty'</span>, <span class="string">'用户名不能为空'</span> );</div><div class="line">validator.add( registerForm.password, <span class="string">'minLength:6'</span>, <span class="string">'密码长度不能少于6 位'</span> );</div><div class="line">validator.add( registerForm.phoneNumber, <span class="string">'isMobile'</span>, <span class="string">'手机号码格式不正确'</span> );</div></pre></td></tr></table></figure></p>
<h2 id="3-代理模式"><a href="#3-代理模式" class="headerlink" title="3. 代理模式"></a>3. 代理模式</h2><p>应用：</p>
<ul>
<li>图片预加载，在加载图片前先用loading.gif来占位。</li>
<li>jquery事件代理绑定模式，在一个table的所有td下绑定事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> myImage = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> imgNode = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</div><div class="line">    <span class="built_in">document</span>.body.appendChild(imgNode);</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        setSrc: <span class="function"><span class="keyword">function</span>(<span class="params">src</span>) </span>&#123;</div><div class="line">            imgNode.src = src;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)();</div><div class="line"><span class="keyword">var</span> proxyImage = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image;</div><div class="line">    img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        myImage.setSrc(<span class="keyword">this</span>.src);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        setSrc: <span class="function"><span class="keyword">function</span>(<span class="params">src</span>) </span>&#123;</div><div class="line">            myImage.setSrc(<span class="string">'file:// /C:/Users/svenzeng/Desktop/loading.gif'</span>);</div><div class="line">            img.src = src;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)();</div><div class="line"><span class="comment">// 在加载前可以先用loading.gif来占位。</span></div><div class="line">proxyImage.setSrc(<span class="string">'http:// imgcache.qq.com/music/photo/k/000GGDys0yA0Nk.jpg'</span>);</div></pre></td></tr></table></figure>
<h2 id="4-迭代器模式"><a href="#4-迭代器模式" class="headerlink" title="4. 迭代器模式"></a>4. 迭代器模式</h2><p>jquery中的迭代器<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">$.each( [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function"><span class="keyword">function</span>(<span class="params"> i, n </span>)</span>&#123;</div><div class="line"><span class="built_in">console</span>.log( <span class="string">'当前下标为： '</span>+ i );</div><div class="line"><span class="built_in">console</span>.log( <span class="string">'当前值为:'</span> + n );</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="5-观察者模式（发布-订阅）"><a href="#5-观察者模式（发布-订阅）" class="headerlink" title="5. 观察者模式（发布-订阅）"></a>5. 观察者模式（发布-订阅）</h2><p>目前浏览器的各种addEventLisener事件，都是观察者模式的应用<br>sub-pub模式定义了对象1对多的依赖关系</p>
<p>React中单向事件流，其中就有观察者模式，其中一个state发生变化，订阅state的components都会引起变化</p>
<p>自定义的发布-订阅模式的话：通用实现如下<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> event = &#123;</div><div class="line">    clientList: [],</div><div class="line">    listen: <span class="function"><span class="keyword">function</span>(<span class="params">key, fn</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.clientList[key]) &#123;</div><div class="line">            <span class="keyword">this</span>.clientList[key] = [];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.clientList[key].push(fn); <span class="comment">// 订阅的消息添加进缓存列表</span></div><div class="line">    &#125;,</div><div class="line">    trigger: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>), <span class="comment">// (1);</span></div><div class="line">            fns = <span class="keyword">this</span>.clientList[key];</div><div class="line">        <span class="keyword">if</span> (!fns || fns.length === <span class="number">0</span>) &#123; <span class="comment">// 如果没有绑定对应的消息</span></div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, fn; fn = fns[i++];) &#123;</div><div class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>); <span class="comment">// (2) // arguments 是trigger 时带上的参数</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="6-装饰者模式"><a href="#6-装饰者模式" class="headerlink" title="6. 装饰者模式"></a>6. 装饰者模式</h2><p>AOP装饰函数     <code>_.before</code>  和  <code>_.after</code></p>
<h2 id="7-适配器模式"><a href="#7-适配器模式" class="headerlink" title="7. 适配器模式"></a>7. 适配器模式</h2><p>主要处理接口不匹配的问题。</p>
<p>用于统一变换接口最方便了。目的就是将一种类型的格式通过函数处理转变另一种格式,例子如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 目前的guangdongcity的字段格式如下，字段信息很少</span></div><div class="line"><span class="keyword">var</span> getGuangdongCity = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> guangdongCity = [&#123;</div><div class="line">        name: <span class="string">'shenzhen'</span>,</div><div class="line">        id: <span class="number">11</span>,</div><div class="line">    &#125;, &#123;</div><div class="line">        name: <span class="string">'guangzhou'</span>,</div><div class="line">        id: <span class="number">12</span>,</div><div class="line">    &#125;];</div><div class="line">    <span class="keyword">return</span> guangdongCity;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> render = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'开始渲染广东省地图'</span>);</div><div class="line">    <span class="built_in">document</span>.write(<span class="built_in">JSON</span>.stringify(fn()));</div><div class="line">&#125;;</div><div class="line">render(getGuangdongCity);</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="comment">// 但是突然有一天，收集到了一个完整的信息map，并且格式也发送了很大变化，如下</span></div><div class="line"><span class="keyword">var</span> guangdongCity = &#123;</div><div class="line">    shenzhen: <span class="number">11</span>,</div><div class="line">    guangzhou: <span class="number">12</span>,</div><div class="line">    zhuhai: <span class="number">13</span>,</div><div class="line">    ...</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>想当初自己就是苦逼的一个一个改，包括后续获取数据的接口可能都要变化。这样效率极低，而且很容易出错。</p>
<p>更轻便的方法就是写一个数据格式的转换器</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> getGuangdongCity = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> guangdongCity = [&#123;</div><div class="line">        name: <span class="string">'shenzhen'</span>,</div><div class="line">        id: <span class="number">11</span>,</div><div class="line">    &#125;, &#123;</div><div class="line">        name: <span class="string">'guangzhou'</span>,</div><div class="line">        id: <span class="number">12</span>,</div><div class="line">    &#125;];</div><div class="line">    <span class="keyword">return</span> guangdongCity;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> render = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'开始渲染广东省地图'</span>);</div><div class="line">    <span class="built_in">document</span>.write(<span class="built_in">JSON</span>.stringify(fn()));</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> addressAdapter = <span class="function"><span class="keyword">function</span>(<span class="params">oldAddressfn</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> address = &#123;&#125;,</div><div class="line">        oldAddress = oldAddressfn();</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, c; c = oldAddress[i++];) &#123;</div><div class="line">        address[c.name] = c.id;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> address;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">render(addressAdapter(getGuangdongCity));</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/16/tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/16/tips/" itemprop="url">生活常识 （补）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-16T10:33:19+08:00">
                2017年 11月 16日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="为什么要常洗床单和被罩？"><a href="#为什么要常洗床单和被罩？" class="headerlink" title="为什么要常洗床单和被罩？"></a>为什么要常洗床单和被罩？</h1><ul>
<li>我们一周脱落的皮屑达28g。近乎一包薯片的重量！！</li>
<li>死皮是尘螨最喜欢的食物。一张1个月未清理的床上，大概会滋生出200万到300万只尘螨！！</li>
<li><p>尘螨的排泄物是家中主要的过敏源！一般很多皮肤问题大都是由这些东西造成的！！</p>
</li>
<li><p>螨虫大都喜欢温暖潮湿的床垫中，一只尘螨的寿命大概是3到4个月。在它的一生中会产生2400粒左右的排泄物……(god!)</p>
</li>
<li>排泄物中有一种高原蛋白。对于敏感体质的人来说，容易引起哮喘等症状</li>
</ul>
<h1 id="如何杀死螨虫呢？"><a href="#如何杀死螨虫呢？" class="headerlink" title="如何杀死螨虫呢？"></a>如何杀死螨虫呢？</h1><p>除了常常更换床单外，吸尘器是最有效的手段。有效清理掉排泄物和它们的食物 – 皮屑。从源头控制螨虫</p>
<h1 id="其他室内过敏源"><a href="#其他室内过敏源" class="headerlink" title="其他室内过敏源"></a>其他室内过敏源</h1><p>除了尘螨，家中还有屋尘这个过敏原的混合物大 boss。科学家发现，屋尘是含有多种过敏原的混合「鸡尾酒」，包括尘螨及其排泄物、人类和动物死皮、宠物口水、霉菌孢子、花粉等。</p>
<p>有几个关于屋尘的冷知识可能会刷新大多数人的认知：</p>
<p>即使你家里没有养猫狗，你家的屋尘依然会有它们的毛发成分存在。猫狗的毛发具有粘性，它们往往会粘在鞋底、大衣上或随风飘落进入家中；<br>有些人对猫狗过敏，其实不是因为它们的毛发，而是宠物毛发上附着的口水。所以光是扫除毛发并不能除去宠物产生的过敏原；<br>花粉是自然界的“野孩子”，但是你室内养的玫瑰花并不会让你过敏，因为它是自花授粉；风媒授粉的植物花粉，以及蕨类植物的孢子，才是让你饱受花粉过敏症困扰的真正原因。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>看了一些科普文章，更加坚定了每半个月换一次床单的想法……<br>立刻下单给自己和老妈买了一个除螨吸尘器。<br>为改变生活习惯提供了一个无法拒绝的理由。</p>
<p>后续更新中…..</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/15/linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/15/linux/" itemprop="url">linux</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-15T17:01:08+08:00">
                2017年 11月 15日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="linux-bash-命令查遗补漏"><a href="#linux-bash-命令查遗补漏" class="headerlink" title="linux bash 命令查遗补漏"></a>linux bash 命令查遗补漏</h2><ul>
<li>ver 显示dos系统版本号</li>
<li>md(mkdir) 创建文件夹</li>
<li>ren(rename) 修改文件夹<br>  <code>ren aaa zhai</code></li>
<li>cat  将文件内容输入到终端上，只能在bash里用</li>
<li>diff 比较两文件不同</li>
<li>kill 9 杀进程</li>
<li>dir 展示目录详细信息</li>
<li>grep 用于查找文件中符合条件的字符串<br>  <code>grep hexo --color=auto *md</code> 查找后缀为md格式的文件中包含hexo字符串的文件，并打印出来，hexo标红</li>
<li>find 查找</li>
<li>ps   列出进程信息 -l -x -a</li>
<li><p>tar 打包文件</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">压缩：tar -jcv -f filename.tar.bz2 要被处理的文件或目录名称  </div><div class="line">查询：tar -jtv -f filename.tar.bz2  </div><div class="line">解压：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录</div></pre></td></tr></table></figure>
</li>
<li><p>time 测算一个命令运行时间</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/14/regexp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/14/regexp/" itemprop="url">正则的一些查遗补漏</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-14T18:02:46+08:00">
                2017年 11月 14日
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/正则/" itemprop="url" rel="index">
                    <span itemprop="name">正则</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><code>\b</code> 表示单词边界，比如我想在一段话中精确找到单词im，或我想找eng结尾的所有单词，这时候就可以通过单词边界进行匹配。<code>/\bim\b/</code> <code>/\w+eng\b/g</code> </li>
<li><p>构造函数中<code>new RegExp()</code>中一定要记得对反斜线\进行转义,在javascript中反斜线本身就是特殊字符，使用需要转义</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\\w+eng\\b'</span>,<span class="string">'g'</span>) <span class="comment">//undefined</span></div><div class="line"><span class="comment">// reg = /\w+eng\b/g</span></div><div class="line"><span class="string">"asd abc leng kkeng alkegl lkjengll"</span>.match(reg)</div><div class="line"><span class="comment">// ["leng","kkeng"]</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>\t</code> 水平制表符，其实就是tab键占的空格！</p>
</li>
<li><code>[abc]</code> 创建abc字符类，<code>[^abc]</code> 创建反向字符类，就是差集的意思,除了abc其他的都匹配</li>
<li><code>\w</code> 的等价类就是<code>[a-zA-Z_0-9]</code> ，<code>\s</code> 是 <code>[\t\n\x0B\f\r]</code> 空白符</li>
<li><p>正则默认是贪婪模式，即最大程度地匹配，非贪婪模式则是说尽可能少地匹配，也就是说一旦成功不再继续尝试就是非贪婪模式。</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 贪婪模式</span></div><div class="line"><span class="string">"123456789"</span>.match(<span class="regexp">/\d&#123;3,6&#125;/</span>) <span class="comment">//123456 而不是123</span></div><div class="line"><span class="comment">// 非贪婪模式，只要在量词后面加上？就可以了，比如\w+?</span></div><div class="line"><span class="string">"123456789"</span>.match(<span class="regexp">/\d&#123;3,6&#125;?/g</span>) <span class="comment">// ["123","456","789"]</span></div></pre></td></tr></table></figure>
</li>
<li><p>连续匹配python单词3次，可以通过分组功能实现<code>(python){3}</code>,量词可以作用于组别上，</p>
</li>
<li><p>或 <code>|</code> 如下所示</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="string">"ByronCapser"</span>.replace(<span class="regexp">/Byron|Casper/g</span>,<span class="string">"X"</span>) <span class="comment">// XX</span></div><div class="line"><span class="string">"ByronsperByrCapser"</span>.replace(<span class="regexp">/Byr(on|Ca)sper/g</span>,<span class="string">"X"</span>) <span class="comment">// XX</span></div></pre></td></tr></table></figure>
</li>
<li><p>反向引用，比如想把2015-12-25 变成 12/25/2015 如何实现</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="string">"2015-12-25"</span>.replace(<span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/g</span>,<span class="string">"$2/$3/$1"</span>) <span class="comment">// "12/25/2015"</span></div><div class="line"><span class="comment">// $1,$2,$3可以捕获分组匹配的内容</span></div><div class="line"><span class="comment">// 如果不想捕获某个分组，只需要在分组内加上 ?: 就可以了  </span></div><div class="line"><span class="string">"2015-12-25"</span>.replace(<span class="regexp">/(\d&#123;4&#125;)-(?:\d&#123;2&#125;)-(\d&#123;2&#125;)/g</span>,<span class="string">"$2/$1"</span>) <span class="comment">// "25/2015"</span></div></pre></td></tr></table></figure>
</li>
<li><p>split也可以用正则,比如如下的例子</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="string">"asd@lll.box*tem"</span>.split(<span class="regexp">/[@\.\*]/</span>) <span class="comment">//["asd","lll","box","tem"]</span></div></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/13/fetch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/13/fetch/" itemprop="url">fetch 学习和小实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-13T18:02:46+08:00">
                2017年 11月 13日
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/fetch/" itemprop="url" rel="index">
                    <span itemprop="name">fetch</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="fetch-简单介绍"><a href="#fetch-简单介绍" class="headerlink" title="fetch 简单介绍"></a>fetch 简单介绍</h3><p>选自：<code>MDN</code> <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API</a></p>
<p>Fetch API提供了一个获取资源的接口(包括跨网络)。可以看做是<code>XMLHttpRequest</code>的替代品</p>
<h3 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h3><p><img src="fetch/code-3.png" alt="兼容性"></p>
<h3 id="fetch-API"><a href="#fetch-API" class="headerlink" title="fetch API"></a>fetch API</h3><p><strong>语法</strong></p>
<blockquote> Promise | Response fetch(input[, init]);</blockquote>

<p>init<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalFetch/fetch" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalFetch/fetch</a></p>
<h3 id="基本概念及用法"><a href="#基本概念及用法" class="headerlink" title="基本概念及用法"></a>基本概念及用法</h3><p>Fetch 提供了对Request和Response对象的通用定义，可以结合<code>service worker</code> 、<code>Cache API</code>、又或是自定义的响应方式。</p>
<p>Fetch 提供了一个Javascript接口，用来访问和操纵HTTP管道部分。提供了全局的<code>fetch</code>方法<br>,相比于XML，他可以结合CORS进行跨域</p>
<p><strong>fetch默认情况下不会从服务端发送或接受任何cookies</strong>，如果站点依赖用户session，会导致未经认证的请求。（要发送 cookies，必须设置 credentials 选项）</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/13/fetch/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/13/resume-2017-11-13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/13/resume-2017-11-13/" itemprop="url">11月13日，杂食堆小记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-13T16:08:17+08:00">
                2017年 11月 13日
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂食堆/" itemprop="url" rel="index">
                    <span itemprop="name">杂食堆</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-overflow-auto-的页面在ios端不能平滑滚动，有明显的卡顿，如何处理解决？"><a href="#1-overflow-auto-的页面在ios端不能平滑滚动，有明显的卡顿，如何处理解决？" class="headerlink" title="1. overflow:auto 的页面在ios端不能平滑滚动，有明显的卡顿，如何处理解决？"></a>1. overflow:auto 的页面在ios端不能平滑滚动，有明显的卡顿，如何处理解决？</h3><p><code>-webkit-overscroll-scrolling:touch</code>;</p>
<ul>
<li>这行代码在webkit内核浏览器里会开启硬件加速，所以性能会更好。</li>
<li>对于Safari来说，对于有<code>-webkit-overflow-scrolling</code>的网页，会创建一个UIScrollView，提供子layer给渲染模块使用</li>
</ul>
<p>从前端开发的角度讲，只需要知道CSS的属性-webkit-overflow-scrolling是真的创建了带有硬件加速的系统级控件，所以效率很高。</p>
<ul>
<li>第三方库：<strong>IScroll</strong> （推荐）<br>因为在某些落后版本的andriod端和IOS，还是不行。并不支持区域滚动。<strong>IScroll</strong> 基本都适配了，同时<code>IScroll</code>支持配置滚动条,专属触发事件等等。</li>
</ul>
<h3 id="2-为什么字体字号一般选用偶数"><a href="#2-为什么字体字号一般选用偶数" class="headerlink" title="2. 为什么字体字号一般选用偶数"></a>2. 为什么字体字号一般选用偶数</h3><ul>
<li>偶数字号更容易与其他页面部分构成比例。不让一个100px的div中让一段文字居中。</li>
<li>window自带的字体一般只提供12,14,16px的点阵、奇数用的是小一号的字体点阵，只不过空间变大了，显得不协调不好看。（旧版浏览器）</li>
<li>现在来说知乎、豆瓣分别是13px,15px。基本上习惯使然。</li>
</ul>
<h3 id="3-斗鱼直播长时间不在会给予用户提示，并切断直播流，节约流量，如何实现？"><a href="#3-斗鱼直播长时间不在会给予用户提示，并切断直播流，节约流量，如何实现？" class="headerlink" title="3. 斗鱼直播长时间不在会给予用户提示，并切断直播流，节约流量，如何实现？"></a>3. 斗鱼直播长时间不在会给予用户提示，并切断直播流，节约流量，如何实现？</h3><p><code>HTML5 Page Visibility</code></p>
<p>参考链接：<a href="http://www.cnblogs.com/zichi/p/5158745.html" target="_blank" rel="external">http://www.cnblogs.com/zichi/p/5158745.html</a></p>
<h3 id="4-document-write-和innerHTML区别"><a href="#4-document-write-和innerHTML区别" class="headerlink" title="4. document.write 和innerHTML区别"></a>4. document.write 和innerHTML区别</h3><p>docuemt.write 是重绘整个页面，innerHTML可以重绘页面的一部分</p>
<h3 id="5-Cookie-隔离"><a href="#5-Cookie-隔离" class="headerlink" title="5. Cookie 隔离"></a>5. Cookie 隔离</h3><p>首先，网站向服务器请求的时候，会自动带上cookie，这样增加表头信息量。Cookie 隔离，就是说，让请求资源的时候不带cookie。怎么实现呢？</p>
<p>传统做法：将css、js、图片等静态资源放在多个域名（CDN)下请求。这样可以跨过浏览器对统一主机名的并发连接上限（50连接数？），提高整体并发量。</p>
<p>cookie隔离技术则是通过使用多个非主要域名来请求静态文件，如果静态文件都放在主域名下，那静态文件请求的时候带有的cookie的数据提交给server是非常浪费的，还不如隔离开</p>
<p>因为cookie有域的限制。不能跨域请求，所以使用非主要域名的时候，请求头就不会带cookie，同时这种方式不会将cookie传入webserver，也减少了webserver对cookie的处理分析环节，提高了webserver的http请求的解析速度。</p>
<h3 id="6-new-一个类，到底干了什么，类的静态方法，实例方法。"><a href="#6-new-一个类，到底干了什么，类的静态方法，实例方法。" class="headerlink" title="6. new 一个类，到底干了什么，类的静态方法，实例方法。"></a>6. new 一个类，到底干了什么，类的静态方法，实例方法。</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> obj  = &#123;&#125;;</div><div class="line">obj.__proto__ = Base.prototype;</div><div class="line">Base.call(obj);</div></pre></td></tr></table></figure>
<p><img src="./img/code-1.png" alt="类的静态方法、实例方法"></p>
<h3 id="7-html5shiv-干嘛用的-原理是什么？"><a href="#7-html5shiv-干嘛用的-原理是什么？" class="headerlink" title="7. html5shiv 干嘛用的? 原理是什么？"></a>7. html5shiv 干嘛用的? 原理是什么？</h3><p>为了解决IE9以下的浏览器不识别html5元素，不能作为父节点包裹子元素，并且不能应用css样式。<br>html5shiv可以让其支持部分<code>html5</code>元素，并提供一些样式。</p>
<p>调用方式：<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!--[if lt IE9]&gt;</span></div><div class="line"><span class="comment">&lt;script type="text/javascript" src="scripts/html5shiv.js"&gt;&lt;/script&gt;</span></div><div class="line"><span class="comment">&lt;![endif]--&gt;</span></div></pre></td></tr></table></figure></p>
<p>原理：<a href="http://www.qdfuns.com/notes/17631/a20a0f394d460cdd66fc7ffb0d68d6fb.html" target="_blank" rel="external">http://www.qdfuns.com/notes/17631/a20a0f394d460cdd66fc7ffb0d68d6fb.html</a></p>
<p><strong>首先，第一点，想让css样式应用在未知元素上，只需执行<code>document.createElement(elementName)</code>即可实现，这是最基本的根源</strong></p>
<p>对于未知的元素标签<code>mytag</code>，只要在head中执行一次<code>document.createElement(mytag)</code>,那么body里所有mytag标签在渲染时就会自动正确应用css样式了。”让CSS样式应用在未知元素上只需执行 <code>document.createElement(elementName)</code> 即可实现。</p>
<p>所以 <strong>基本原理</strong> 就是在执行的时候，先往head中插入应用到html5标签的css样式，然后对于所有html5标签都执行一次document.createElement(nodeName)，这样，浏览器在渲染body部分时，对于html5标签就能够正确的应用css样式，这也就是html5shiv.js必须放置在head中的原因</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/10/xss-2017-11-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="卡布鲁司机">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kabulu | 杂食堆">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/10/xss-2017-11-10/" itemprop="url">CSRF 与 XSS 的那些事</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-10T14:36:07+08:00">
                2017年 11月 10日
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web安全/" itemprop="url" rel="index">
                    <span itemprop="name">web安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="Web-安全"><a href="#Web-安全" class="headerlink" title="Web 安全"></a>Web 安全</h2><h3 id="CSRF-Cross-site-request-forgery-伪造"><a href="#CSRF-Cross-site-request-forgery-伪造" class="headerlink" title="CSRF(Cross-site request forgery[伪造]):"></a><code>CSRF</code>(Cross-site request forgery[伪造]):</h3><p>全称为跨站请求伪造，一句话概述该攻击手法：盗用用户的身份认证信息在用户当前已登录的Web应用程序上执行非用户本意的操作</p>
<h4 id="具体操作原理："><a href="#具体操作原理：" class="headerlink" title="具体操作原理："></a>具体操作原理：</h4><p>用户登录之后，服务器会将用户身份认证信息（用户Session）保存在用户浏览器的cookie中。如果当前用户没有登出，而恰巧又在Session过期之前受到诱惑后访问了一个潜伏着CSRF攻击的网站，该网站便会盗用用户当前浏览器的cookie来模拟用户想服务器发送请求，执行预谋的操作。</p>
<blockquote><p>CSRF基于曹操 <code>挟天子以令诸侯</code> 的手段上做了 <code>创新</code>：挟天子以骗诸侯。</p>
</blockquote>
<p>这样的盗用能够生效，有两个前提条件</p>
<p>1.用户没有登出当前网站，并且当前用户Session未过期。<br>2.用户受到的诱惑，真实打开了攻击网站</p>
<p>上面说这么多还是太模糊了，直接上场景：</p>
<h4 id="场景还原"><a href="#场景还原" class="headerlink" title="场景还原"></a>场景还原</h4>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/10/xss-2017-11-10/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="卡布鲁司机" />
            
              <p class="site-author-name" itemprop="name">卡布鲁司机</p>
              <p class="site-description motion-element" itemprop="description">写写心得，发发牢骚，爬爬天坑，孤单的编程之路上留点念。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/zhaihaoran" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://github.com/zhaihaoran/" title="github" target="_blank">github</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">卡布鲁司机</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  









<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>



  





  

  

  

  
  

  

  

  

</body>
</html>
